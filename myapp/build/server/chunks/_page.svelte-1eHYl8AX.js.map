{"version":3,"file":"_page.svelte-1eHYl8AX.js","sources":["../../../.svelte-kit/adapter-node/entries/pages/marketdetails/_id_/_page.svelte.js"],"sourcesContent":["import { V as store_get, Z as ensure_array_like, W as unsubscribe_stores, T as pop, X as escape_html, Y as attr, Q as push } from \"../../../../chunks/index.js\";\nimport \"../../../../chunks/client.js\";\nimport { p as page } from \"../../../../chunks/stores.js\";\nimport { w as writable } from \"../../../../chunks/index2.js\";\nfunction _page($$payload, $$props) {\n  push();\n  var $$store_subs;\n  let book = {};\n  let quantity = 1;\n  let relatedBooks = [];\n  let isLoadingRelatedBooks = true;\n  let isLoadingBook = true;\n  let errorMessage = \"\";\n  let bookId = store_get($$store_subs ??= {}, \"$page\", page).params.id;\n  let update = true;\n  async function fetchBookData(bookId2) {\n    isLoadingBook = true;\n    isLoadingRelatedBooks = true;\n    errorMessage = \"\";\n    try {\n      const response = await fetch(`http://localhost:3000/seller/books?id=${bookId2}`);\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      const data = await response.json();\n      if (data) {\n        book = data;\n      } else {\n        book = {};\n        errorMessage = \"Book not found\";\n      }\n    } catch (error) {\n      console.error(\"Error fetching main book details:\", error);\n      errorMessage = \"Failed to load book details. Please try again later.\";\n    } finally {\n      isLoadingBook = false;\n      isLoading.set(false);\n    }\n    if (book.owner_id) {\n      try {\n        const response = await fetch(`http://localhost:3000/seller/books?ownerId=${book.owner_id}`);\n        if (!response.ok) {\n          throw new Error(`HTTP error! status: ${response.status}`);\n        }\n        const data = await response.json();\n        relatedBooks = data;\n      } catch (error) {\n        console.error(\"Error fetching related books:\", error);\n        errorMessage = \"Failed to load related books.\";\n        relatedBooks = [];\n      } finally {\n        isLoadingRelatedBooks = false;\n      }\n    } else {\n      relatedBooks = [];\n      isLoadingRelatedBooks = false;\n    }\n  }\n  const isLoading = writable(true);\n  if (store_get($$store_subs ??= {}, \"$page\", page).params.id || update) {\n    quantity = 1;\n    bookId = store_get($$store_subs ??= {}, \"$page\", page).params.id;\n    fetchBookData(bookId);\n    update = false;\n  }\n  if (store_get($$store_subs ??= {}, \"$isLoading\", isLoading)) {\n    $$payload.out += \"<!--[-->\";\n  } else {\n    $$payload.out += \"<!--[!-->\";\n    $$payload.out += `<div class=\"min-h-screen bg-blue-50\"><div class=\"max-w-5xl mx-auto p-6\">`;\n    if (errorMessage) {\n      $$payload.out += \"<!--[-->\";\n      $$payload.out += `<p class=\"text-red-500\">${escape_html(errorMessage)}</p>`;\n    } else {\n      $$payload.out += \"<!--[!-->\";\n    }\n    $$payload.out += `<!--]--> `;\n    if (isLoadingBook) {\n      $$payload.out += \"<!--[-->\";\n      $$payload.out += `<div class=\"animate-pulse\"><div class=\"h-64 bg-gray-300 rounded-lg\"></div> <div class=\"mt-4 space-y-2\"><div class=\"h-6 bg-gray-300 rounded\"></div> <div class=\"h-4 bg-gray-300 rounded w-3/4\"></div> <div class=\"h-4 bg-gray-300 rounded w-1/2\"></div></div></div>`;\n    } else {\n      $$payload.out += \"<!--[!-->\";\n      $$payload.out += `<div class=\"grid grid-cols-1 md:grid-cols-2 gap-6\"><div class=\"relative\">`;\n      if (book.book_image) {\n        $$payload.out += \"<!--[-->\";\n        $$payload.out += `<div class=\"max-w-xs\"><img class=\"w-full rounded-lg object-cover\"${attr(\"src\", book.book_image)}${attr(\"alt\", book.book_name)}></div>`;\n      } else {\n        $$payload.out += \"<!--[!-->\";\n      }\n      $$payload.out += `<!--]--></div> <div class=\"space-y-4\"><h1 class=\"text-3xl font-bold\">${escape_html(book.book_name)}</h1> <p class=\"text-2xl text-red-600 font-semibold\">${escape_html(book.book_price)} ‡∏ö‡∏≤‡∏ó</p> <div class=\"flex items-center\"><label class=\"mr-2 text-lg\">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô</label> <button class=\"px-4 py-2 bg-gray-500 rounded text-xl\">-</button> <span class=\"px-4 text-xl\">${escape_html(quantity)}</span> <button class=\"px-4 py-2 bg-gray-300 rounded text-xl\">+</button></div> <div class=\"flex gap-4\"><button class=\"px-8 py-3 border border-orange-500 text-orange-500 rounded text-lg\">‡πÉ‡∏™‡πà‡∏£‡∏ñ‡πÄ‡∏Ç‡πá‡∏ô</button></div> <div class=\"mt-8\"><h2 class=\"text-xl font-semibold\">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î :</h2> <p class=\"text-gray-600 mt-2\">${escape_html(book.description)}</p></div></div></div>`;\n    }\n    $$payload.out += `<!--]--> <div class=\"mt-8\"><button class=\"bg-blue-700 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded\">üì¢ ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡πÄ‡∏•‡πà‡∏°‡∏ô‡∏µ‡πâ</button></div> <div class=\"mt-8\"><h2 class=\"text-xl font-semibold\">‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á</h2> `;\n    if (isLoadingRelatedBooks) {\n      $$payload.out += \"<!--[-->\";\n      const each_array = ensure_array_like(Array(4));\n      $$payload.out += `<div class=\"grid grid-cols-2 md:grid-cols-4 gap-4 mt-4\"><!--[-->`;\n      for (let $$index = 0, $$length = each_array.length; $$index < $$length; $$index++) {\n        each_array[$$index];\n        $$payload.out += `<div class=\"bg-gray-200 h-40 rounded-lg animate-pulse\"></div>`;\n      }\n      $$payload.out += `<!--]--></div>`;\n    } else {\n      $$payload.out += \"<!--[!-->\";\n      const each_array_1 = ensure_array_like(relatedBooks);\n      $$payload.out += `<div class=\"grid grid-cols-2 md:grid-cols-4 gap-4 mt-4\">`;\n      if (each_array_1.length !== 0) {\n        $$payload.out += \"<!--[-->\";\n        for (let $$index_1 = 0, $$length = each_array_1.length; $$index_1 < $$length; $$index_1++) {\n          let related = each_array_1[$$index_1];\n          $$payload.out += `<div class=\"bg-gray-200 h-40 rounded-lg overflow-hidden\">`;\n          if (related.book_image) {\n            $$payload.out += \"<!--[-->\";\n            $$payload.out += `<img class=\"h-48 w-96 object-scale-down place-content-center\"${attr(\"src\", related.book_image)}${attr(\"alt\", related.book_name_originl || \"Related Book\")} loading=\"lazy\">`;\n          } else {\n            $$payload.out += \"<!--[!-->\";\n          }\n          $$payload.out += `<!--]--></div>`;\n        }\n      } else {\n        $$payload.out += \"<!--[!-->\";\n        $$payload.out += `<p>No related books found.</p>`;\n      }\n      $$payload.out += `<!--]--></div>`;\n    }\n    $$payload.out += `<!--]--></div></div></div>`;\n  }\n  $$payload.out += `<!--]--> `;\n  {\n    $$payload.out += \"<!--[!-->\";\n  }\n  $$payload.out += `<!--]-->`;\n  if ($$store_subs) unsubscribe_stores($$store_subs);\n  pop();\n}\nexport {\n  _page as default\n};\n"],"names":[],"mappings":"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"}