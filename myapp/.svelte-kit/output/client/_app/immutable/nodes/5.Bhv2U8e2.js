import{c as Be,a as v,t as f}from"../chunks/BpdS5ozQ.js";import"../chunks/ak-IiZ70.js";import{p as Ee,l as H,d as qe,f as O,a as Se,b as c,g as e,c as s,r,s as n,n as N,m as _,t as L}from"../chunks/BkNIMPUX.js";import{s as B}from"../chunks/8GdiTE-D.js";import{i as se}from"../chunks/BO1fjogy.js";import{e as G,i as J}from"../chunks/DCYGmzsl.js";import{r as je,s as oe}from"../chunks/H21sVsVO.js";import{t as ie}from"../chunks/20z5p9mC.js";import{e as x}from"../chunks/BpZ3buzO.js";import{t as le,s as Te,q as Fe,a as He,f as Le}from"../chunks/pl10jhQ3.js";import{a as Re}from"../chunks/BzbwHmVE.js";import{i as De}from"../chunks/CPaK9zB5.js";import{s as Ue,a as ne}from"../chunks/Cu0EAYA7.js";import{g as ce}from"../chunks/CPiIr9-y.js";import{p as ze}from"../chunks/BQ7FjgTO.js";import{o as Ae,w as Ie}from"../chunks/BrBxsZ45.js";import{B as Me,C as Oe}from"../chunks/WWqWQjrX.js";import{F as de,D as Ne}from"../chunks/6eaVWb4c.js";import{R as Ge}from"../chunks/Dl5t5ueC.js";var Je=f('<div class="fixed inset-0 flex items-center justify-center bg-blue-50 z-50"><div class="spinner animate-spin w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full"></div></div>'),Ke=f('<li class="text-blue-600 cursor-pointer hover:underline"> </li>'),Qe=f('<button class="btn btn-primary"> </button>'),Ve=f("<!>Filter",1),We=f('<li class="text-blue-600 cursor-pointer hover:underline"> </li>'),Xe=f('<div class="flex items-center"><h5 id="drawer-label" class="inline-flex items-center mb-4 text-base font-semibold text-gray-500 dark:text-gray-400"><!>Filter</h5> <!></div> <h2 class="text-xl font-semibold text-blue-700">หมวดหมู่</h2> <ul class="mt-2 space-y-2"><li class="text-blue-600 cursor-pointer hover:underline">ทั้งหมด</li> <!></ul>',1),Ye=f('<div class="book-card border border-blue-500 rounded-lg shadow-lg bg-white flex flex-col"><div class="p-4"><img class="object-contain w-full h-[200px] rounded"></div> <div class="px-4 pb-4 flex-grow"><p class="font-semibold text-blue-700 truncate"> </p> <!> <p class="text-blue-500 font-bold"> </p> <button class="mt-2 w-full bg-blue-500 text-white py-2 rounded">ซื้อเลย</button></div></div>'),Ze=f("<p>No books in this category.</p>"),et=f('<div class="min-h-screen bg-white"><div class="max-w-6xl mx-auto p-4"><div class="flex items-center justify-between mb-4"><h1 class="text-3xl font-bold text-blue-700">ร้านหนังสือ</h1></div> <div class="flex gap-4"><aside class="hidden lg:block w-[20%] border border-blue-500 p-4 rounded-lg bg-blue-50 h-fit"><h2 class="text-xl font-semibold text-blue-700">หมวดหมู่</h2> <ul class="mt-2 space-y-2"><li class="text-blue-600 cursor-pointer hover:underline">ทั้งหมด</li> <!></ul></aside> <div class="md:container md:mx-auto"><div class="mb-4"><label class="flex items-center w-full justify-between"><div class="flex items-center space-x-2"><!> <input type="checkbox" class="form-checkbox h-5 w-5 text-blue-600"> <span class="text-sm text-gray-700">แสดงเฉพาะร้านค้าที่น่าเชื่อถือ</span></div> <!></label> <!></div> <div class="md:container md:mx-auto grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4"></div></div></div></div></div>');function xt(ue,ve){Ee(ve,!1);const[K,fe]=Ue(),Q=()=>ne(ze,"$page",K),me=()=>ne(D,"$isLoading",K),E=_();let q=_(!0),pe={x:-320,duration:200,easing:Te},p=_([]),R=_(),S=_([]),b=_(null),V=_(!1),k=[];const D=Ie(!0);function be(t){let a=new Set;return t.forEach(d=>{d.book_category&&d.book_category.split(",").forEach(m=>{a.add(m)})}),Array.from(a)}async function W(){try{const t=new URLSearchParams(window.location.search),a=t.get("name");let d="http://localhost:3000/books/searched/f?";a?(c(R,a),d+=`name=${encodeURIComponent(a)}`):d="http://localhost:3000/books?all=true";const g=await fetch(d);if(!g.ok)throw new Error(`HTTP error! Status: ${g.status}`);c(p,await g.json()),c(S,be(e(p)));const m=t.get("category");m&&c(b,m)}catch(t){console.error("Error fetching books:",t),c(p,[]),c(S,[])}finally{D.set(!1)}}function j(t){c(b,t),U()}function ge(t){ce(`/details/${t}`)}Ae(async()=>{k=document.querySelectorAll(".book-card"),await W()});function U(){if(!k.length)return;let t=0;k.forEach(a=>{a.style.height="auto"}),k.forEach(a=>{t=Math.max(t,a.offsetHeight)}),k.forEach(a=>{a.style.height=`${t}px`})}function _e(){D.set(!0),ce("/all")}H(()=>(e(p),e(b)),()=>{c(E,(()=>{let t=e(p);return e(b)!==null&&(t=t.filter(a=>a.book_category&&a.book_category.includes(e(b)))),t})())}),H(()=>e(p),()=>{e(p).length>0&&U()}),H(()=>e(E),()=>{e(E)&&U()}),H(()=>Q(),()=>{Q().url&&W()}),qe(),De();var X=Be(),he=O(X);{var xe=t=>{var a=Je(),d=s(a);r(a),le(3,d,()=>He,()=>({duration:300,easing:Fe})),le(3,a,()=>Le,()=>({duration:300})),v(t,a)},ke=t=>{var a=et(),d=s(a),g=n(s(d),2),m=s(g),Y=n(s(m),2),Z=s(Y),we=n(Z,2);G(we,1,()=>e(S),J,(i,o)=>{var l=Ke(),u=s(l,!0);r(l),L(()=>{ie(l,"font-bold",e(b)===e(o)),B(u,e(o))}),x("click",l,()=>j(e(o))),v(i,l)}),r(Y),r(m);var ee=n(m,2),z=s(ee),A=s(z),I=s(A),te=s(I);{var ye=i=>{var o=Qe(),l=s(o);r(o),L(()=>B(l,`${e(R)??""} ❌`)),x("click",o,_e),v(i,o)};se(te,i=>{e(R)&&i(ye)})}var ae=n(te,2);je(ae),N(2),r(I);var $e=n(I,2);Me($e,{class:"block lg:hidden",$$events:{click:()=>c(q,!1)},children:(i,o)=>{var l=Ve(),u=O(l);de(u,{class:"w-5 h-5 me-2.5"}),N(),v(i,l)},$$slots:{default:!0}}),r(A);var Ce=n(A,2);Ne(Ce,{transitionType:"fly",transitionParams:pe,id:"sidebar1",get hidden(){return e(q)},set hidden(i){c(q,i)},children:(i,o)=>{var l=Xe(),u=O(l),h=s(u),T=s(h);de(T,{class:"w-5 h-5 me-2.5"}),N(),r(h);var w=n(h,2);Oe(w,{class:"mb-4 dark:text-white",$$events:{click:()=>c(q,!0)}}),r(u);var F=n(u,4),y=s(F),$=n(y,2);G($,1,()=>e(S),J,(M,C)=>{var P=We(),Pe=s(P,!0);r(P),L(()=>{ie(P,"font-bold",e(b)===e(C)),B(Pe,e(C))}),x("click",P,()=>j(e(C))),v(M,P)}),r(F),x("click",y,()=>j(null)),v(i,l)},$$slots:{default:!0},$$legacy:!0}),r(z);var re=n(z,2);G(re,5,()=>e(E),J,(i,o)=>{var l=Ye(),u=s(l),h=s(u);r(u);var T=n(u,2),w=s(T),F=s(w,!0);r(w);var y=n(w,2);Ge(y,{id:"example-3",total:5,get rating(){return e(o).book_score}});var $=n(y,2),M=s($,!0);r($);var C=n($,2);r(T),r(l),L(()=>{oe(h,"src",e(o).book_image),oe(h,"alt",e(o).book_name_originl),B(F,e(o).book_name_originl),B(M,e(o).book_price)}),x("click",C,()=>ge(e(o).book_id)),v(i,l)},i=>{var o=Ze();v(i,o)}),r(re),r(ee),r(g),r(d),r(a),x("click",Z,()=>j(null)),Re(ae,()=>e(V),i=>c(V,i)),v(t,a)};se(he,t=>{me()?t(xe):t(ke,!1)})}v(ue,X),Se(),fe()}export{xt as component};
